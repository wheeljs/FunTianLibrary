define("core",[],function(){return window.Fun={version:"0.1.0"}}),define("common",["./core"],function(e){"use strict";return e.Common={createEvent:function(e,t,n,r){var i=document.createEvent("Events");return i.initEvent(e,t,n),typeof r!="undefined"&&(i.data=r),i},extend:function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.super=t.prototype},String:{isNullOrEmpty:function(e){return e==null||e.length===0}}},e.Common}),define("cache",["./core","./common","jquery"],function(e,t){"use strict";function n(e){var t=$.extend({},n.defaults,e);this.options=t}return n.defaults={invalidMilliseconds:18e5,prefix:"cache."},n.prototype.compileKey=function(e,n){return n=n||this.options.prefix,t.String.isNullOrEmpty(n)===!1?n+e:e},n.prototype.get=function(e){e=this.compileKey(e);if(e in localStorage==1){var t=localStorage.getItem(e);if(typeof t!="undefined")return t=JSON.parse(t),t.invalidTime!==0&&t.invalidTime<(new Date).getTime()?(this.remove(e),null):t.obj}return null},n.prototype.set=function(e,t,n){if(typeof e=="undefined")return!1;n==null&&(n={});var r=$.extend({},this.options,n);e=this.compileKey(e,r.prefix);var i={invalidTime:(new Date).getTime(),obj:t};return Number.isNaN(r.invalidMilliseconds)===!1?(r.invalidMilliseconds===0?i.invalidTime=0:i.invalidTime+=r.invalidMilliseconds,localStorage.setItem(e,JSON.stringify(i)),!0):!1},n.prototype.remove=function(e){return e=this.compileKey(e),e in localStorage==1?(localStorage.removeItem(e),e in localStorage==0):!0},n.prototype.removeAll=function(e){var n=0;if(typeof e=="undefined"){var r=this.options.prefix;if(t.String.isNullOrEmpty(r)!==!1)return n;e=new RegExp("^"+r.replace(".","\\.")+".+")}for(var i in localStorage)localStorage.hasOwnProperty(i)&&e.test(i)&&(localStorage.removeItem(i),n+=1);return n},e.Cache=n}),define("templates",["./core","./common","jquery"],function(e,t){"use strict";var n=!1,r={init:function(e){if(typeof e=="undefined"){console.error("Cannot initialize, cause compiler is invalid.");return}var t=this;if(n!==!0){console.log("Compiling and caching templates...");var r=$("[cache-template]");r.each(function(n,r){var i=r.id,s=i.replace(/^tpl-/,""),o=e(r.innerHTML);t.add(s,o)}),n=!0}},isValidName:function(e){if(t.String.isNullOrEmpty(e)===!1){var n=i.filter(function(t){return t===e});return n.length===0}return!1},add:function(e,t){this.isValidName(e)&&(this[e]=t)},remove:function(e){this.isValidName(e)&&delete this[e]}},i=[];for(var s in r)r.hasOwnProperty(s)&&i.push(s);return e.Templates=r}),define("template-helper",["./core","./common"],function(e,t){"use strict";var n={getNamespace:function(e){return this[e]},setNamespace:function(e,t){this.isValidName(e)&&(this[e]=t)},removeNamespace:function(e){return this.getNamespace(e)!=null&&delete this[e],e in this},isValidName:function(e){if(t.String.isNullOrEmpty(e)===!1){var n=r.filter(function(t){return t===e});return n.length===0}return!1},register:function(e,n,r){if(t.String.isNullOrEmpty(e)||t.String.isNullOrEmpty(n))return;var i=this.getNamespace(e);i==null&&(i={},this.setNamespace(e,i)),this._register(i,n,r)},_register:function(e,t,n){e[t]=n},unRegister:function(e,t){var n=null;switch(typeof e){case"string":var r=e.split(/\./);n=this.getNamespace(r[0]),r.length>1&&typeof t=="undefined"&&(t=r[r.length-1]);break;case"object":n=e}return n!=null&&delete n[t],t in n}},r=[];for(var i in n)n.hasOwnProperty(i)&&r.push(i);return e.TemplateHelper=n}),define("ui/ui-base",["../core","../common","jquery"],function(e,t){"use strict";function r(){}var n=[].slice;return r.prototype.mergeOptions=function(e,t,r){var i=n.apply(arguments);i.shift(),this.options=$.extend.apply($,[e,{}].concat(i))},r.prototype.fire=function(e,n){typeof n=="undefined"&&(n={});if(t.String.isNullOrEmpty(e)===!1){var r=this.getOptions(),i=e[0].toUpperCase().concat(e.substr(1)),s=r["on"+i];typeof s=="function"?s.call(this,n):typeof this.$el.trigger=="function"&&this.$el.trigger(e+".ui",n)}},r.prototype.getOptions=function(){return this.options},e.UIBase=r}),define("ui/loader-button",["../core","../common","./ui-base","jquery"],function(e,t,n){"use strict";function r(e,t){this.mergeOptions(!0,{},r.defaults,t);var n=this,i=this.options;if(this instanceof Window==1)return new r(e,t);if(i.type===r.Types.TEXT){var s=$.extend(!0,{},i.configure),o=e.find('[btn-icon],[class*="icon-"]'),u=o.attr("class");$.each(s,function(e,t){t.iconClass=u}),i.configure=s}e.is("[binding]")===!1&&e.on("click",function(){var e=n._state,t=e;switch(e){case r.State.NORMAL:t=r.State.LOADING;break;case r.State.FINISHED:t=r.State.NORMAL}n.setState(t);if(n._state===r.State.LOADING&&n._proxyPromise==null){var i=n.options.onLoadExecute.call(n);n._proxyPromise=i,i.always(function(){n.setState(r.State.FINISHED),n._proxyPromise=null})}}).attr("binding",!0),this.$el=e,this.setState(i.initState,{triggerBefore:!1,triggerAfter:!1,render:!1}),this.init()}return r.State={NORMAL:1,LOADING:2,FINISHED:4},r.Types={ICON:1,TEXT:2,ALL:3},t.extend(r,n),r.prototype.init=function(){var e=this.$el,t=this.options,n=e.clone(),r=t.configure[t.initState],i=$("<span>").attr("btn-icon",""),s=$("<span>").attr("btn-text","");s.text(e.text()),e.empty().append(i).append(" ").append(s),this.render(r),this.fire("initialized",{})},r.prototype.getStateConfigure=function(){return this.options.configure[this._state]},r.prototype.render=function(e){var t=this.options.type,n=this.$el,i=n.find("[btn-icon]"),s=n.find("[btn-text]");(t===r.Types.ICON||t===r.Types.ALL)&&i.prop("class",e.iconClass),(t===r.Types.TEXT||t===r.Types.ALL)&&s.text(e.text),this.fire("rendered",{})},r.prototype.setState=function(e,t){var n=this._state;typeof t=="undefined"&&(t={}),t.triggerBefore!==!1&&this.fire("stateChange",{prevState:n,currentState:e}),this._state=e,t.triggerAfter!==!1&&this.fire("stateChanged",{currentState:e}),t.render!==!1&&this.render(this.getStateConfigure())},r.defaults={initState:r.State.NORMAL,type:r.Types.ICON,configure:function(){var e={};return e[r.State.NORMAL]={},e[r.State.LOADING]={},e[r.State.FINISHED]={},e}(),onLoadExecute:function(){var e=$.Deferred(function(){setTimeout(function(){e.resolve()},2e3)});return e}},e.LoaderButton=r}),function(){typeof define=="function"&&define.amd&&define("fun",["./core","./common","./cache","./templates","./template-helper","./ui/ui-base","./ui/loader-button"],function(e){return e})}();